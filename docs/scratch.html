<!doctype html><html data-current="page" lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Scratchpad</title><meta name="description" content="GLAuth Documentation"><link rel="stylesheet" href="/assets/style.css?v=1634005533014"><link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>💥</text></svg>"><script defer="defer">function logout(){localStorage.removeItem("passphrase"),window.location.href="/"}function showNavigation(){const e=document.getElementById("navigation");e.classList.remove("hidden","sticky","pt-32"),e.classList.add("absolute","right-0","top-0","-mt-0","z-50","pt-0","bg-white","border-l","border-gray-200")}function closeNavigation(){const e=document.getElementById("navigation");e.classList.add("hidden"),e.classList.remove("absolute","right-0","z-50","bg-gray-100","border-r","border-gray-800")}function activateDarkMode(){"true"===localStorage.getItem("darkmode")?(localStorage.setItem("darkmode","false"),document.body.classList.remove("dark")):(localStorage.setItem("darkmode","true"),document.body.classList.add("dark"))}function toggleLayout(e){"horizontal"===localStorage.getItem("layout")?localStorage.setItem("layout","vertical"):"vertical"===localStorage.getItem("layout")?localStorage.setItem("layout","horizontal"):localStorage.getItem("layout")||("horizontal"===e?localStorage.setItem("layout","vertical"):localStorage.setItem("layout","horizontal")),console.log(localStorage.getItem("layout"))}window.netlifyIdentity&&window.netlifyIdentity.on("init",e=>{e||window.netlifyIdentity.on("login",()=>{document.location.href="/admin/"})}),document.addEventListener("DOMContentLoaded",function(){document.getElementById("main").addEventListener("click",closeNavigation,!1),"true"===localStorage.getItem("darkmode")?document.body.classList.add("dark"):document.body.classList.remove("dark")}),function(e,t){"use strict";const o=o=>{const a=e.searchIndex.search(o.target.value,{bool:"OR",expand:!0}),n=t.getElementById("searchField"),d=t.getElementById("searchResults"),l=t.getElementById("noResultsFound");t.getElementById("navigation");n.addEventListener("focus",e=>{e.target.classList.remove("hidden"),d.classList.remove("hidden")}),t.addEventListener("click",function(e){n.contains(e.target)||(console.log("hidden"),d.classList.add("hidden"),l.classList.add("hidden"),l.classList.add("hidden"))}),d.innerHTML="",""!=o.target.value?""!=a?(l.classList.add("hidden"),d.classList.add("p-4"),a.map(e=>{const{id:o,title:a,description:n}=e.doc,l=t.createElement("li",{tabindex:"-1"});d.appendChild(l);const i=t.createElement("h3");l.appendChild(i);const s=t.createElement("a");s.setAttribute("href",o),s.textContent=a,i.appendChild(s);const c=t.createElement("p");c.textContent=n,l.appendChild(c)})):l.classList.remove("hidden"):l.classList.add("hidden")};fetch("/docs/search-index.json").then(a=>a.json().then(a=>{e.searchIndex=elasticlunr.Index.load(a),t.getElementById("searchField").addEventListener("input",o)}))}(window,document);</script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/elasticlunr/0.9.6/elasticlunr.min.js" defer="defer"></script><script src="/assets/alpine.min.js"></script><script src="/assets/index.js"></script><script src="https://cdn.jsdelivr.net/npm/chart.js"></script><script>document.addEventListener("DOMContentLoaded", function(){
        var reg = /^[\'\"]+|[\'\"]+$/g;
         //-  chart.js
        var elements = document.getElementsByClassName('chartjs');
        var chartjsLen = elements.length;
        var myChartJs = [];
        for(var i = 0;i < chartjsLen; i++){
            var ctx = elements[i].getContext('2d');
            myChartJs[i] = new Chart(ctx,JSON.parse(elements[i].innerHTML));
        }
  });</script></head><body><nav class="w-full"><div class="container mx-auto px-6 flex items-center justify-between"><div aria-label="Home. logo" role="img"><img class="object-scale-down w-12 h-12" src="/assets/logo.png"></div><div><button onclick="toggleMenu(true)" class="sm:block md:hidden text-gray-500 hover:text-gray-700 focus:text-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500"><svg aria-haspopup="true" aria-label="open Main Menu" xmlns="http://www.w3.org/2000/svg" class="md:hidden icon icon-tabler icon-tabler-menu" width="24" height="24" viewBox="0 0 24 24" stroke-width="1.5" stroke="#2c3e50" fill="none" stroke-linecap="round"><path stroke="none" d="M0 0h24v24H0z"></path><line x1="4" y1="8" x2="20" y2="8"></line><line x1="4" y1="16" x2="20" y2="16"></line></svg></button><div id="menu" class="md:block lg:block hidden"><button onclick="toggleMenu(false)" class="block md:hidden lg:hidden text-gray-500 hover:text-gray-700 focus:text-gray-700 fixed focus:outline-none focus:ring-2 focus:ring-gray-500 z-30 top-0 mt-6"><svg aria-label="close main menu" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" stroke-width="1.5" stroke="#2c3e50" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg></button><ul class="flex text-3xl md:text-base items-center py-10 md:flex flex-col md:flex-row justify-center fixed md:relative top-0 bottom-0 left-0 right-0 bg-white md:bg-transparent z-20"><li class="text-gray-800 hover:text-gray-900 cursor-pointer lg:text-lg pt-10 md:pt-0"><a href="https://github.com/glauth/glauth/releases">Releases</a></li><li class="text-gray-800 hover:text-gray-900 cursor-pointer lg:text-lg pt-10 md:pt-0 md:ml-5 lg:ml-10"><a href="/docs/"><strong>Learn/Documentation</strong></a></li><li class="text-gray-800 hover:text-gray-900 cursor-pointer lg:text-lg pt-10 md:pt-0 md:ml-5 lg:ml-10"><div x-data="{ 'showChatModal': false }"><button type="button" @click="showChatModal = true">Chat &amp; Support</button><div class="fixed inset-0 z-30 flex items-center justify-center overflow-auto bg-black bg-opacity-50 transition duration-150 easy-in-out" x-show="showChatModal" @keydown.escape="showChatModal=false"><div role="alert" class="container mx-auto w-11/12 md:w-2/3 max-w-lg flex justify-center" @click.away="showChatModal=false"><div class="flex items-center justify-center py-8 px-4"><div class="relative md:w-80 max-w-xs rounded shadow-lg p-6 dark:bg-gray-800 bg-white"><h1 class="dark:text-gray-100 text-gray-800 font-bold text-lg">Chat &amp; Help</h1><a href="https://gitter.im/glauth/community"><div class="flex items-center justify-between mt-4 border-gray-400 border rounded-lg px-4 py-4 cursor-pointer"><p class="text-base font-medium leading-4 dark:text-gray-100 text-gray-800">Gitter Chat</p><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"/></svg></div></a><div class="w-full bg-gray-100 rounded-lg flex items-center justify-between pt-4 pb-0"><p tabindex="0" class="focus:outline-none mb-3 text-sm text-gray-600 dark:text-gray-400 text-center font-normal">You can use Matrix chat if you already have a federated account. To join the conversation:</p></div><div class="bg-indigo-100 rounded p-3"><div tabindex="0" aria-label="copy link" class="focus:outline-none flex items-center"><svg tabindex="0" aria-label="copy link icon" role="img" class="focus:outline-none" width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M9.18213 7.76799L8.47513 7.05999L9.18213 6.35299C9.41594 6.12122 9.60168 5.84554 9.72866 5.54179C9.85565 5.23804 9.92139 4.9122 9.92211 4.58298C9.92283 4.25375 9.85852 3.92763 9.73286 3.62332C9.60721 3.31902 9.42268 3.04253 9.18989 2.80974C8.95709 2.57694 8.6806 2.39241 8.3763 2.26676C8.072 2.1411 7.74587 2.07679 7.41665 2.07751C7.08742 2.07823 6.76158 2.14397 6.45783 2.27096C6.15408 2.39795 5.8784 2.58368 5.64663 2.81749L4.93963 3.52499L4.23213 2.81799L4.94013 2.11099C5.59654 1.45458 6.48682 1.08582 7.41513 1.08582C8.34343 1.08582 9.23372 1.45458 9.89013 2.11099C10.5465 2.7674 10.9153 3.65769 10.9153 4.58599C10.9153 5.5143 10.5465 6.40458 9.89013 7.06099L9.18263 7.76799H9.18213ZM7.76813 9.18199L7.06063 9.88899C6.40422 10.5454 5.51393 10.9142 4.58563 10.9142C3.65732 10.9142 2.76704 10.5454 2.11063 9.88899C1.45422 9.23258 1.08545 8.3423 1.08545 7.41399C1.08545 6.48569 1.45422 5.59541 2.11063 4.93899L2.81813 4.23199L3.52513 4.93999L2.81813 5.64699C2.58431 5.87877 2.39858 6.15445 2.27159 6.4582C2.1446 6.76195 2.07886 7.08779 2.07814 7.41701C2.07742 7.74624 2.14173 8.07236 2.26739 8.37667C2.39305 8.68097 2.57757 8.95746 2.81037 9.19025C3.04317 9.42305 3.31965 9.60758 3.62396 9.73323C3.92826 9.85889 4.25438 9.9232 4.58361 9.92248C4.91284 9.92176 5.23868 9.85602 5.54243 9.72903C5.84618 9.60204 6.12185 9.41631 6.35363 9.18249L7.06063 8.47549L7.76813 9.18249V9.18199ZM7.41413 3.87849L8.12163 4.58599L4.58613 8.12099L3.87863 7.41399L7.41413 3.87899V3.87849Z" fill="#4338CA"/></svg><p class="text-xs pl-3 pr-4 leading-3 text-indigo-700">/join #glauth_community:gitter.im</p></div></div><button aria-label="close modal" class="cursor-pointer absolute top-0 right-0 mt-4 mr-5 dark:text-gray-100 text-gray-400 hover: dark:text-gray-100 text-gray-600 transition duration-150 ease-in-out focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-black rounded" @click="showChatModal=false"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-x" width="20" height="20" viewBox="0 0 24 24" stroke-width="2.5" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg></button></div></div></div></div></div></li></ul></div></div>&nbsp;</div></nav><div id="app" class="h-screen bg-white dark:bg-gray-900"><div class="fixed w-full top-0 left-0 z-10"><nav class="flex h-16 md:h-20 items-center bg-white dark:bg-gray-900 z-20 fixed top-0 left-0 right-0 border-b border-gray-100 px-0 py-2 dark:bg-dark dark:border-gray-800 transition-colors duration-200"><div class="hidden md:block space-y-4 w-full p-4"><a class="no-underline text-gray-600 hover:text-gray-800 font-bold dark:text-gray-500 items-center" href="/"><span class="text-xl">GLAuth</span> <span class="block mt-1 text-sm text-gray-500 hover:text-gray-600 dark:text-gray-600 font-normal text-xs sm:text-xs md:text-sm lg:text-sm w-full">Documentation</span></a></div><div class="mr-2 relative w-full md:w-64"><input aria-label="Search" x-data="{ isOpen: true }" x-bind:class="{ 'hidden': !isOpen }" type="search" placeholder="Search..." class="ml-2 w-60 bg-gray-50 dark:bg-gray-800 appearance-none border dark:border-gray-700 rounded py-2 px-2 placeholder-gray-300 leading-tight focus:ring-4 focus:ring-blue-200 dark:focus:ring-gray-700 ring-opacity-50 border-gray-200" id="searchField"><ul tabindex="0" class="bg-white dark:bg-gray-200 z-50 shadow-md p-0 w-full list-none m-0 absolute left-0 md:right-0 bg-white rounded mt-1 top-100 z-50" id="searchResults"></ul><div class="hidden shadow-md list-none p-4 m-0 absolute left-0 md:right-0 bg-white rounded mt-1 border top-100 divide-y divide-gray-300 z-2" id="noResultsFound"><p>No results found.</p></div></div><button aria-label="Show navigation" onclick="showNavigation()" class="block md:hidden mr-3"><svg fill="none" width="24" height="24" viewBox="0 0 24 24" class="text-gray-400 hover:text-gray-600" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg></button> <a aria-label="dark mode" rel="noopener noreferrer" class="mr-3 switch text-current cursor-pointer" onclick="activateDarkMode()"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 16 16" height="24" xmlns="http://www.w3.org/2000/svg"><path class="text-gray-400 hover:text-yellow-400 dark:text-yellow-400" fill-rule="evenodd" clip-rule="evenodd" d="M11.67 8.658a3.661 3.661 0 0 0-.781 1.114 3.28 3.28 0 0 0-.268 1.329v1.6a1.304 1.304 0 0 1-.794 1.197 1.282 1.282 0 0 1-.509.102H7.712a1.285 1.285 0 0 1-.922-.379 1.303 1.303 0 0 1-.38-.92v-1.6c0-.479-.092-.921-.274-1.329a3.556 3.556 0 0 0-.776-1.114 4.689 4.689 0 0 1-1.006-1.437A4.187 4.187 0 0 1 4 5.5a4.432 4.432 0 0 1 .616-2.27c.197-.336.432-.64.705-.914a4.6 4.6 0 0 1 .911-.702c.338-.196.7-.348 1.084-.454a4.45 4.45 0 0 1 1.2-.16 4.476 4.476 0 0 1 2.276.614 4.475 4.475 0 0 1 1.622 1.616 4.438 4.438 0 0 1 .616 2.27c0 .617-.117 1.191-.353 1.721a4.69 4.69 0 0 1-1.006 1.437zM9.623 10.5H7.409v2.201c0 .081.028.15.09.212a.29.29 0 0 0 .213.09h1.606a.289.289 0 0 0 .213-.09.286.286 0 0 0 .09-.212V10.5z"></path></svg></a></nav></div><nav id="navigation" class="fixed inset-y-0 overflow-x-hidden overflow-y-auto hidden w:64 lg:w-72 mt-20 md:block dark:bg-gray-900 flex-none top-0 p-4 w-64 md:border-r border-b border-gray-100 dark:border-gray-800"><button name="Close navigation" onclick="closeNavigation()" class="float-right justify-end block md:hidden -mr-4 p-6"><svg xmlns="http://www.w3.org/2000/svg" class="dark:bg-gray-500" width="18" height="18" viewBox="0 0 18 18"><path class="text-gray-100" d="M14.53 4.53l-1.06-1.06L9 7.94 4.53 3.47 3.47 4.53 7.94 9l-4.47 4.47 1.06 1.06L9 10.06l4.47 4.47 1.06-1.06L10.06 9z"/></svg></button><div class="clear-right"><a href="/"><div class="block md:hidden pt-4 font-semibold text-gray-500">GLAuth</div><div class="block md:hidden text-sm text-gray-500 mb-4">Documentation</div></a><ul class="nav"><li class="item"><a href="/docs/" class="item">Introduction</a></li><li class="item"><a href="/docs/quickstart.html" class="item">Quick Start</a></li><li class="item"><a href="/docs/setup.html" class="item">Setup</a><ul><li class="item"><a href="/docs/containerization.html" class="item">Containerization</a></li><li class="item"><a href="/docs/kubernetes.html" class="item">Kubernetes</a></li></ul></li><li class="item"><a href="/docs/backends.html" class="item">Backends</a><ul><li class="item"><a href="/docs/file.html" class="item">Config/File</a></li><li class="item"><a href="/docs/s3.html" class="item">S3</a></li><li class="item"><a href="/docs/owncloud.html" class="item">ownCloud</a></li><li class="item"><a href="/docs/databases.html" class="item">Databases</a><ul><li class="item"><a href="/docs/sqlite.html" class="item">SQLite</a></li><li class="item"><a href="/docs/mysql.html" class="item">MySQL/MariaDB</a></li><li class="item"><a href="/docs/postgresql.html" class="item">Postgresql</a></li></ul></li></ul></li><li class="item"><a href="/docs/web-ui.html" class="item">Web UI</a></li><li class="item"><a href="/docs/security.html" class="item">Security</a><ul><li class="item"><a href="/docs/rate-limiting.html" class="item">Rate Limiting</a></li><li class="item"><a href="/docs/yubikey.html" class="item">Yubikey</a></li></ul></li><li class="item"><a href="/docs/capabilities.html" class="item">Capabilities</a></li><li class="item"><a href="/docs/high-availability.html" class="item">High Availability</a></li><li class="item"><a href="/docs/ssh-integration.html" class="item">SSH Integration</a><ul><li class="item"><a href="/docs/ssh-libpam-ldap-ncsd.html" class="item">Libmap-ldap and ncsd</a></li><li class="item"><a href="/docs/ssh-sssd.html" class="item">SSSD</a></li></ul></li><li class="item"><a href="/docs/limitations.html" class="item">Limitations</a></li><li class="item"><a href="/docs/related-projects.html" class="item">Related Projects</a></li><li class="item"><a href="/docs/development.html" class="item">Development</a><ul><li class="item"><a href="/docs/debugging-ldap-behaviors.html" class="item">Debugging LDAP Behaviors</a></li><li class="item"><a href="/docs/openldap-setup.html" class="item">OpenLDAP Setup</a></li><li class="item"><a href="/docs/running-travis-ci-locally.html" class="item">Running Travis-CI Locally</a></li><li class="item"><a href="/docs/shipping-using-podman.html" class="item">Using Podman</a></li></ul></li><li class="item active"><a href="/docs/scratch.html" class="item active">Scratch</a></li></ul></div></nav><main id="main" class="dark:bg-gray-900 pt-16 sm:pt-18 md:pt-20 md:pl-64 lg:pl-72"><div class="flex w-full justify-center"><div class="mt-4 px-6 md:px-6 lg:px-8 xl:px-12 w-full max-w-5xl"><div class="wrapper flex justify-between"><div class="main flex flex-col pr-0 prose sm:prose lg:prose-lg xl:prose-md"><article><h1 class="dark:text-gray-500">Scratchpad</h1><div class="self-center adjust dark:text-gray-400"><p></p><div class="table-of-contents"><ul><li><a href="#glauth%3A-ldap-authentication-server-for-developers">GLAuth: LDAP authentication server for developers</a></li><li><a href="#other-architectures">Other Architectures</a></li><li><a href="#logging">Logging</a></li><li><a href="#testing">Testing</a></li><li><a href="#compatibility">Compatibility</a><ul><li><a href="#stargazers-over-time">Stargazers over time</a></li><li><a href="#some-charts">Some Charts</a></li></ul></li></ul></div><p></p><h1 id="glauth%3A-ldap-authentication-server-for-developers">GLAuth: LDAP authentication server for developers</h1><p>Go-lang LDAP Authentication (GLAuth) is a secure, easy-to-use, LDAP server w/ configurable backends.</p><p><a href="https://gitter.im/glauth/community?utm_source=badge&amp;utm_medium=badge&amp;utm_campaign=pr-badge" target="_blank" rel="noopener noreferrer"><a href="https://badges.gitter.im/glauth/community.svg" target="_self"><img src="https://badges.gitter.im/glauth/community.svg" alt="Gitter" class="p-4"></a></a><br><a href="hey" target="_blank" rel="noopener noreferrer"><a href="https://img.shields.io/badge/chat-%2fjoin%20%23glauth_community:gitter.im-green" target="_self"><img src="https://img.shields.io/badge/chat-%2fjoin%20%23glauth_community:gitter.im-green" alt="Matrix" class="p-4"></a></a></p><p><a href="https://img.shields.io/github/downloads/glauth/glauth/total" target="_self"><img src="https://img.shields.io/github/downloads/glauth/glauth/total" alt="GitHub all releases" class="p-4"></a><br><a href="https://badgen.net/docker/pulls/glauth/glauth" target="_self"><img src="https://badgen.net/docker/pulls/glauth/glauth" alt="Docker pulls" class="p-4"></a></p><p><a href="https://img.shields.io/travis/com/glauth/glauth/dev" target="_self"><img src="https://img.shields.io/travis/com/glauth/glauth/dev" alt="Travis (.com) branch" class="p-4"></a><br><a href="https://img.shields.io/docker/automated/glauth/glauth" target="_self"><img src="https://img.shields.io/docker/automated/glauth/glauth" alt="Docker Automated build" class="p-4"></a></p><p><a href="https://img.shields.io/github/last-commit/glauth/glauth/dev" target="_self"><img src="https://img.shields.io/github/last-commit/glauth/glauth/dev" alt="GitHub last commit (branch)" class="p-4"></a><br><a href="https://img.shields.io/codeclimate/maintainability-percentage/glauth/glauth" target="_self"><img src="https://img.shields.io/codeclimate/maintainability-percentage/glauth/glauth" alt="Code Climate maintainability" class="p-4"></a></p><ul><li>Centrally manage accounts across your infrastructure</li><li>Centrally manage SSH keys, Linux accounts, and passwords for cloud servers.</li><li>Lightweight alternative to OpenLDAP and Active Directory for development, or a homelab.</li><li>Store your user directory in a file, local or in S3; SQL database; or proxy to existing LDAP servers.</li><li>Two Factor Authentication (transparent to applications)</li><li>Multiple backends can be chained to inject features</li></ul><p>Use it to centralize account management across your Linux servers, your OSX machines, and your support applications (Jenkins, Apache/Nginx, Graylog2, and many more!).</p><h3 id="contributing">Contributing</h3><ul><li>Please base all Pull Requests on <a href="https://github.com/glauth/glauth/tree/dev" target="_blank" rel="noopener noreferrer">dev</a>, not master.</li><li>Format your code autonmatically using <code>gofmt -d ./</code> before committing</li></ul><h3 id="quickstart">Quickstart</h3><p>This quickstart is a great way to try out GLAuth in a non-production environment. <em>Be warned that you should take the extra steps to setup SSL (TLS) for production use!</em></p><ol><li>Download a precompiled binary from the <a href="https://github.com/glauth/glauth/releases" target="_blank" rel="noopener noreferrer">releases</a> page.</li><li>Download the <a href="https://github.com/glauth/glauth/blob/master/sample-simple.cfg" target="_blank" rel="noopener noreferrer">example config file</a>.</li><li>Start the GLAuth server, referencing the path to the desired config file with <code>-c</code>.<ul><li><code>./glauth64 -c sample-simple.cfg</code></li></ul></li><li>Test with traditional LDAP tools<ul><li>For example: <code>ldapsearch -LLL -H ldap://localhost:3893 -D cn=serviceuser,ou=svcaccts,dc=glauth,dc=com -w mysecret -x -bdc=glauth,dc=com cn=hackers</code></li></ul></li></ol><h3 id="make-commands">Make Commands</h3><p>Note - makefile uses git data to inject build-time variables. For best results, run in the context of the git repo.</p><p><em>make all</em> - run build binaries for platforms</p><p><em>make fast</em> - run build for only linux 64 bit</p><p><em>make run</em> - wrapper for the ‘go run’ command, setting up the needed tooling</p><p><em>make plugins</em> - build additional (SQL) plugin backends</p><p><em>make test</em> - run the integration test on linux64 binary</p><h3 id="usage%3A">Usage:</h3><pre class="torchlight" style="background-color: #292D3E; --theme-selection-background: #00000080;" data-torchlight-processed="3449c9e5e332f1dbb81505cd739fbf3f"><code><!-- Syntax highlighted by torchlight.dev --><div class='line'><span style="color: #A6ACCD;">glauth: securely expose your LDAP for external auth</span></div><div class='line'><span style="color: #A6ACCD;"></span></div><div class='line'><span style="color: #A6ACCD;">Usage:</span></div><div class='line'><span style="color: #A6ACCD;">  glauth [options] -c &lt;file|s3url&gt;</span></div><div class='line'><span style="color: #A6ACCD;">  glauth -h --help</span></div><div class='line'><span style="color: #A6ACCD;">  glauth --version</span></div><div class='line'><span style="color: #A6ACCD;"></span></div><div class='line'><span style="color: #A6ACCD;">Options:</span></div><div class='line'><span style="color: #A6ACCD;">  -c, --config &lt;file&gt;       Config file.</span></div><div class='line'><span style="color: #A6ACCD;">  -K &lt;aws_key_id&gt;           AWS Key ID.</span></div><div class='line'><span style="color: #A6ACCD;">  -S &lt;aws_secret_key&gt;       AWS Secret Key.</span></div><div class='line'><span style="color: #A6ACCD;">  -r &lt;aws_region&gt;           AWS Region [default: us-east-1].</span></div><div class='line'><span style="color: #A6ACCD;">  --ldap &lt;address&gt;          Listen address for the LDAP server.</span></div><div class='line'><span style="color: #A6ACCD;">  --ldaps &lt;address&gt;         Listen address for the LDAPS server.</span></div><div class='line'><span style="color: #A6ACCD;">  --ldaps-cert &lt;cert-file&gt;  Path to cert file for the LDAPS server.</span></div><div class='line'><span style="color: #A6ACCD;">  --ldaps-key &lt;key-file&gt;    Path to key file for the LDAPS server.</span></div><div class='line'><span style="color: #A6ACCD;">  -h, --help                Show this screen.</span></div><div class='line'><span style="color: #A6ACCD;">  --version                 Show version.</span></div><textarea data-torchlight-original="true" style="display: none !important;">glauth: securely expose your LDAP for external auth

Usage:
  glauth [options] -c &lt;file|s3url&gt;
  glauth -h --help
  glauth --version

Options:
  -c, --config &lt;file&gt;       Config file.
  -K &lt;aws_key_id&gt;           AWS Key ID.
  -S &lt;aws_secret_key&gt;       AWS Secret Key.
  -r &lt;aws_region&gt;           AWS Region [default: us-east-1].
  --ldap &lt;address&gt;          Listen address for the LDAP server.
  --ldaps &lt;address&gt;         Listen address for the LDAPS server.
  --ldaps-cert &lt;cert-file&gt;  Path to cert file for the LDAPS server.
  --ldaps-key &lt;key-file&gt;    Path to key file for the LDAPS server.
  -h, --help                Show this screen.
  --version                 Show version.
</textarea></code></pre><h3 id="configuration%3A">Configuration:</h3><p>GLAuth can be deployed as a single server using only a local configuration file. This is great for testing, or for production if you use a tool like Puppet/Chef/Ansible:</p><pre class="torchlight" style="background-color: #292D3E; --theme-selection-background: #00000080;" data-torchlight-processed="3449c9e5e332f1dbb81505cd739fbf3f"><code><!-- Syntax highlighted by torchlight.dev --><div class='line'><span style="color: #A6ACCD;">glauth -c glauth.cfg</span></div><textarea data-torchlight-original="true" style="display: none !important;">glauth -c glauth.cfg
</textarea></code></pre><p>Here’s a sample config wth hardcoded users and groups:</p><pre class="torchlight" style="background-color: #292D3E; --theme-selection-background: #00000080;" data-torchlight-processed="3449c9e5e332f1dbb81505cd739fbf3f"><code class="language-toml"><!-- Syntax highlighted by torchlight.dev --><div class='line'><span style="color: #89DDFF;">[</span><span style="color: #FFCB6B;">backend</span><span style="color: #89DDFF;">]</span></div><div class='line'><span style="color: #A6ACCD;">  datastore </span><span style="color: #89DDFF;">=</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">&quot;</span><span style="color: #C3E88D;">config</span><span style="color: #89DDFF;">&quot;</span></div><div class='line'><span style="color: #A6ACCD;">  baseDN </span><span style="color: #89DDFF;">=</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">&quot;</span><span style="color: #C3E88D;">dc=glauth,dc=com</span><span style="color: #89DDFF;">&quot;</span></div><div class='line'><span style="color: #89DDFF;">[[</span><span style="color: #FFCB6B;">users</span><span style="color: #89DDFF;">]]</span></div><div class='line'><span style="color: #A6ACCD;">  name </span><span style="color: #89DDFF;">=</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">&quot;</span><span style="color: #C3E88D;">hackers</span><span style="color: #89DDFF;">&quot;</span></div><div class='line'><span style="color: #A6ACCD;">  uidnumber </span><span style="color: #89DDFF;">=</span><span style="color: #A6ACCD;"> </span><span style="color: #F78C6C;">5001</span></div><div class='line'><span style="color: #A6ACCD;">  primarygroup </span><span style="color: #89DDFF;">=</span><span style="color: #A6ACCD;"> </span><span style="color: #F78C6C;">5501</span></div><div class='line'><span style="color: #A6ACCD;">  passsha256 </span><span style="color: #89DDFF;">=</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">&quot;</span><span style="color: #C3E88D;">6478579e37aff45f013e14eeb30b3cc56c72ccdc310123bcdf53e0333e3f416a</span><span style="color: #89DDFF;">&quot;</span><span style="color: #A6ACCD;">   </span><span style="color: #676E95;"># dogood</span></div><div class='line'><span style="color: #A6ACCD;">  sshkeys </span><span style="color: #89DDFF;">=</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">[</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">&quot;</span><span style="color: #C3E88D;">ssh-dss AAAAB3...</span><span style="color: #89DDFF;">&quot;</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">]</span></div><div class='line'><span style="color: #89DDFF;">[[</span><span style="color: #FFCB6B;">users</span><span style="color: #89DDFF;">]]</span></div><div class='line'><span style="color: #A6ACCD;">  name </span><span style="color: #89DDFF;">=</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">&quot;</span><span style="color: #C3E88D;">uberhackers</span><span style="color: #89DDFF;">&quot;</span></div><div class='line'><span style="color: #A6ACCD;">  uidnumber </span><span style="color: #89DDFF;">=</span><span style="color: #A6ACCD;"> </span><span style="color: #F78C6C;">5006</span></div><div class='line'><span style="color: #A6ACCD;">  primarygroup </span><span style="color: #89DDFF;">=</span><span style="color: #A6ACCD;"> </span><span style="color: #F78C6C;">5501</span></div><div class='line'><span style="color: #A6ACCD;">  passbcrypt </span><span style="color: #89DDFF;">=</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">&quot;</span><span style="color: #C3E88D;">243261243130244B62463462656F7265504F762E794F324957746D656541326B4B46596275674A79336A476845764B616D65446169784E41384F4432</span><span style="color: #89DDFF;">&quot;</span><span style="color: #A6ACCD;">   </span><span style="color: #676E95;"># dogood</span></div><div class='line'><span style="color: #89DDFF;">[[</span><span style="color: #FFCB6B;">groups</span><span style="color: #89DDFF;">]]</span></div><div class='line'><span style="color: #A6ACCD;">  name </span><span style="color: #89DDFF;">=</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">&quot;</span><span style="color: #C3E88D;">superheros</span><span style="color: #89DDFF;">&quot;</span></div><div class='line'><span style="color: #A6ACCD;">  gidnumber </span><span style="color: #89DDFF;">=</span><span style="color: #A6ACCD;"> </span><span style="color: #F78C6C;">5501</span></div><textarea data-torchlight-original="true" style="display: none !important;">[backend]
  datastore = "config"
  baseDN = "dc=glauth,dc=com"
[[users]]
  name = "hackers"
  uidnumber = 5001
  primarygroup = 5501
  passsha256 = "6478579e37aff45f013e14eeb30b3cc56c72ccdc310123bcdf53e0333e3f416a"   # dogood
  sshkeys = [ "ssh-dss AAAAB3..." ]
[[users]]
  name = "uberhackers"
  uidnumber = 5006
  primarygroup = 5501
  passbcrypt = "243261243130244B62463462656F7265504F762E794F324957746D656541326B4B46596275674A79336A476845764B616D65446169784E41384F4432"   # dogood
[[groups]]
  name = "superheros"
  gidnumber = 5501
</textarea></code></pre><p>To create the password SHA hash, use this command: <code>echo -n &quot;mysecret&quot; | openssl dgst -sha256</code></p><p>Instead of a local configuration file, GLAuth can fetch its configuration from S3. This is an easy way to ensure redundant GLAuth servers are always in-sync.</p><pre class="torchlight" style="background-color: #292D3E; --theme-selection-background: #00000080;" data-torchlight-processed="3449c9e5e332f1dbb81505cd739fbf3f"><code class="language-bash"><!-- Syntax highlighted by torchlight.dev --><div class='line'><span style="color: #A6ACCD;">glauth -c s3://bucketname/glauth.cfg</span></div><textarea data-torchlight-original="true" style="display: none !important;">glauth -c s3://bucketname/glauth.cfg
</textarea></code></pre><p>In order to use S3, you must set your AWS credentials. Either:</p><ol><li>set the -K and -S command-line flags <strong>OR</strong></li><li>set the AWS_ACCESS_KEY_ID and AWS_SECRET_ACCESS_KEY environment variables.</li></ol><p>More configuration options are documented here: <a href="https://github.com/glauth/glauth/blob/master/sample-simple.cfg" target="_blank" rel="noopener noreferrer">https://github.com/glauth/glauth/blob/master/sample-simple.cfg</a></p><h3 id="chaining-backends">Chaining backends</h3><p>This can be used, for instance, to inject support for Two Factor Authentication for backends that do not support the feature natively:</p><pre class="torchlight" style="background-color: #292D3E; --theme-selection-background: #00000080;" data-torchlight-processed="3449c9e5e332f1dbb81505cd739fbf3f"><code><!-- Syntax highlighted by torchlight.dev --><div class='line'><span style="color: #A6ACCD;">[[backends]]</span></div><div class='line'><span style="color: #A6ACCD;">  datastore = &quot;ldap&quot;</span></div><div class='line'><span style="color: #A6ACCD;">  servers = [&quot;ldap:s//localhost:390&quot;]</span></div><div class='line'><span style="color: #A6ACCD;"></span></div><div class='line'><span style="color: #A6ACCD;">[[backends]]</span></div><div class='line'><span style="color: #A6ACCD;">  datastore = &quot;config&quot;</span></div><div class='line'><span style="color: #A6ACCD;"></span></div><div class='line'><span style="color: #A6ACCD;">...</span></div><div class='line'><span style="color: #A6ACCD;"></span></div><div class='line'><span style="color: #A6ACCD;">[[users]]</span></div><div class='line'><span style="color: #A6ACCD;">  name = &quot;hackers&quot;</span></div><div class='line'><span style="color: #A6ACCD;">  otpsecret = &quot;................&quot;</span></div><textarea data-torchlight-original="true" style="display: none !important;">[[backends]]
  datastore = "ldap"
  servers = ["ldap:s//localhost:390"]

[[backends]]
  datastore = "config"

...

[[users]]
  name = "hackers"
  otpsecret = "................"
</textarea></code></pre><h3 id="required-fields">Required Fields</h3><ul><li>Name<ul><li>The user’s username</li></ul></li><li>ou<ul><li>ID of the user’s primary group</li></ul></li><li>uidnumber<ul><li>The user’s unix user id</li></ul></li><li>sshPublicKey<ul><li>Specify an array of public keys</li></ul></li></ul><h3 id="optional-fields">Optional Fields</h3><ul><li>otherGroups<ul><li>Array of IDs of groups the user is a member of.</li><li>Example: [5501, 5002]</li><li>default = blank</li></ul></li><li>givenname<ul><li>First name</li><li>Example: John</li><li>default = blank</li></ul></li><li>sn<ul><li>Last name</li><li>Example: Doe</li><li>default = blank</li></ul></li><li>disabled<ul><li>Specify if account is active.</li><li>Set to ‘true’ (without quotes) to make the LDAP entry add ‘AccountStatus = inactive’</li><li>default = false (active)</li></ul></li><li>mail<ul><li>Specify an email</li><li>example: <a href="mailto:jdoe@example.com" target="_blank" rel="noopener noreferrer">jdoe@example.com</a></li><li>default = blank</li></ul></li><li>loginshell<ul><li>Specify a different login shell for the user</li><li>Example: /bin/sh, or /sbin/nologin</li><li>default = /bin/bash</li></ul></li><li>homedirectory<ul><li>Specify an overridden home directory for the user</li><li>Example: /home/itadmin</li><li>default = /home/[username]</li></ul></li><li>otpsecret<ul><li>Specify OTP secret used to validate OTP passcode</li><li>Example: 3hnvnk4ycv44glzigd6s25j4dougs3rk</li><li>default = blank</li></ul></li><li>passappbcrypt<ul><li>Specify an array of app passwords which can also succesfully bind - these bypass the OTP check. Hash the same way as password.</li><li>Example: [“c32255dbf6fd6b64883ec8801f793bccfa2a860f2b1ae1315cd95cdac1338efa”,“4939efa7c87095dacb5e7e8b8cfb3a660fa1f5edcc9108f6d7ec20ea4d6b3a88”]</li><li>default = blank</li></ul></li><li>passappsha256<ul><li>Specify an array of app passwords which can also succesfully bind - these bypass the OTP check. Hash the same way as password.</li><li>Example: [“c32255dbf6fd6b64883ec8801f793bccfa2a860f2b1ae1315cd95cdac1338efa”,“4939efa7c87095dacb5e7e8b8cfb3a660fa1f5edcc9108f6d7ec20ea4d6b3a88”]</li><li>default = blank</li></ul></li></ul><h3 id="openssh-keys%3A">OpenSSH keys:</h3><p>GLAuth can store a user’s SSH authorized keys. Add one or more keys per user as shown above, then setup the goklp helper: <a href="https://github.com/appliedtrust/goklp" target="_blank" rel="noopener noreferrer">https://github.com/appliedtrust/goklp</a></p><h3 id="strong-passwords">Strong Passwords</h3><p>If you are currently using sha256 passwords (<code>passsha256</code> or <code>passappsha256</code>) moving to strong, salted paswords is recommended. Simply switch to <code>passbcrypt</code> and/or <code>passappbcrypt</code> password types. Currently (2021) 2<sup>12</sup> is a reasonably good value, depending our your server’s CPU.</p><h3 id="two-factor-authentication">Two Factor Authentication</h3><p>GLAuth can be configured to accept OTP tokens as appended to a users password. Support is added for both <strong>TOTP tokens</strong> (often known by it’s most prominent implementation, “Google Authenticator”) and <strong>Yubikey OTP tokens</strong>.</p><p>When using 2FA, append the 2FA code to the end of the password when authenticating. For example, if your password is “monkey” and your otp is “123456”, enter “monkey123456” as your password.</p><h4 id="totp-configuration">TOTP Configuration</h4><p>To enable TOTP authentication on a user, you can use a tool <a href="https://freeotp.github.io/qrcode.html" target="_blank" rel="noopener noreferrer">like this</a> to generate a QR code (pick ‘Timeout’ and optionally let it generate a random secret for you), which can be scanned and used with the <a href="https://play.google.com/store/apps/details?id=com.google.android.apps.authenticator2&amp;hl=en" target="_blank" rel="noopener noreferrer">Google Authenticator</a> app. To enable TOTP authentication, configure the <code>otpsecret</code> for the user with the TOTP secret.</p><h4 id="app-passwords">App Passwords</h4><p>Additionally, you can specify an array of password hashes using the <code>passappsha256</code> for app passwords. These are not OTP validated, and are hashed in the same way as a password. This allows you to generate a long random string to be used in software which requires the ability to authenticate.</p><p>However, app passwords can be used without OTP as well.</p><h3 id="backends%3A">Backends:</h3><p>For advanced users, GLAuth supports pluggable backends. Currently, it can use a local file, S3 or an existing LDAP infrastructure. In the future, we hope to have backends that support Mongo, SQL, and other datastores.</p><pre class="torchlight" style="background-color: #292D3E; --theme-selection-background: #00000080;" data-torchlight-processed="3449c9e5e332f1dbb81505cd739fbf3f"><code class="language-toml"><!-- Syntax highlighted by torchlight.dev --><div class='line'><span style="color: #89DDFF;">[</span><span style="color: #FFCB6B;">backend</span><span style="color: #89DDFF;">]</span></div><div class='line'><span style="color: #A6ACCD;">  datastore </span><span style="color: #89DDFF;">=</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">&quot;</span><span style="color: #C3E88D;">ldap</span><span style="color: #89DDFF;">&quot;</span></div><div class='line'><span style="color: #A6ACCD;">  servers </span><span style="color: #89DDFF;">=</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">[</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">&quot;</span><span style="color: #C3E88D;">ldaps://server1:636</span><span style="color: #89DDFF;">&quot;</span><span style="color: #89DDFF;">,</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">&quot;</span><span style="color: #C3E88D;">ldaps://server2:636</span><span style="color: #89DDFF;">&quot;</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">]</span></div><textarea data-torchlight-original="true" style="display: none !important;">[backend]
  datastore = "ldap"
  servers = [ "ldaps://server1:636", "ldaps://server2:636" ]
</textarea></code></pre><h3 id="production%3A">Production:</h3><p>Any of the architectures above will work for production. Just remember:</p><ul><li>Always use legit SSL certs for production!</li></ul><h1 id="other-architectures">Other Architectures</h1><p>A small note about other architectures: while I expect the code is, for the most part, system-independent, there is not a good (and free) CI system which can be easily used to continuously test releases on ARM, BSD, Linux-32bit, and Windows. As such, all of the non-linux-64bit packages are provided as is. The extent of testing on these packages consists solely of cross-compiling for these architectures from a linux 64 bit system.</p><p>We will accept PRs which fix bugs on these platforms, but be aware these binaries will not be tested regularly, and instead are provided for the convenience of those who feel comfortable with this.</p><h3 id="building%3A">Building:</h3><p>You’ll need go-bindata to build GLAuth. Then use the Makefile.</p><pre class="torchlight" style="background-color: #292D3E; --theme-selection-background: #00000080;" data-torchlight-processed="3449c9e5e332f1dbb81505cd739fbf3f"><code><!-- Syntax highlighted by torchlight.dev --><div class='line'><span style="color: #A6ACCD;">go get github.com/jteeuwen/go-bindata/...</span></div><div class='line'><span style="color: #A6ACCD;">make all</span></div><textarea data-torchlight-original="true" style="display: none !important;">go get github.com/jteeuwen/go-bindata/...
make all
</textarea></code></pre><h1 id="logging">Logging</h1><ul><li>using logr with increasing verbosity<ul><li>0 you always want to see this</li><li>1 common logging that you might <em>possibly</em> want to turn off (error)</li><li>2 warn</li><li>3 notice</li><li>4 info</li><li>6 debug</li><li>8 trace</li><li>10 I would like to performance test your log collection stack</li></ul></li><li>errors really are errors that cannot be handled or returned<ul><li>returning a proper LDAP error code is handling an error</li></ul></li></ul><h1 id="testing">Testing</h1><p>Of course, a core set of tests is being run by Travis CI. However, when developing new features/refactoring, a more comprehensive regression testing suite is needed.</p><p>You can run <code>go test</code> to execute the tests found in <code>glauth_test.go</code> – better, if it is installed, you can run <a href="https://github.com/smartystreets/goconvey" target="_blank" rel="noopener noreferrer">goconvey</a></p><p>Since some tests cover TOTP, you will first need to install <code>oathtool</code> in your environment.</p><p>In order to test GLAuth against an LDAP backend, you will need docker. Run this command:</p><pre class="torchlight" style="background-color: #292D3E; --theme-selection-background: #00000080;" data-torchlight-processed="3449c9e5e332f1dbb81505cd739fbf3f"><code class="language-shell"><!-- Syntax highlighted by torchlight.dev --><div class='line'><span style="color: #FFCB6B;">docker</span><span style="color: #A6ACCD;"> </span><span style="color: #C3E88D;">run</span><span style="color: #A6ACCD;"> \</span></div><div class='line'><span style="color: #A6ACCD;">    </span><span style="color: #FFCB6B;">--rm</span><span style="color: #A6ACCD;"> \</span></div><div class='line'><span style="color: #A6ACCD;">    </span><span style="color: #FFCB6B;">-d</span><span style="color: #A6ACCD;"> \</span></div><div class='line'><span style="color: #A6ACCD;">    </span><span style="color: #FFCB6B;">-p</span><span style="color: #A6ACCD;"> </span><span style="color: #C3E88D;">389:389</span><span style="color: #A6ACCD;"> \</span></div><div class='line'><span style="color: #A6ACCD;">    </span><span style="color: #FFCB6B;">--name</span><span style="color: #A6ACCD;"> </span><span style="color: #C3E88D;">openldap-service</span><span style="color: #A6ACCD;"> \</span></div><div class='line'><span style="color: #A6ACCD;">    </span><span style="color: #FFCB6B;">--hostname</span><span style="color: #A6ACCD;"> </span><span style="color: #C3E88D;">ldap-service</span><span style="color: #A6ACCD;"> \</span></div><div class='line'><span style="color: #A6ACCD;">    </span><span style="color: #FFCB6B;">--env</span><span style="color: #A6ACCD;"> </span><span style="color: #C3E88D;">LDAP_ORGANISATION=</span><span style="color: #89DDFF;">&quot;</span><span style="color: #C3E88D;">GLauth</span><span style="color: #89DDFF;">&quot;</span><span style="color: #A6ACCD;"> \</span></div><div class='line'><span style="color: #A6ACCD;">    </span><span style="color: #FFCB6B;">--env</span><span style="color: #A6ACCD;"> </span><span style="color: #C3E88D;">LDAP_DOMAIN=</span><span style="color: #89DDFF;">&quot;</span><span style="color: #C3E88D;">glauth.com</span><span style="color: #89DDFF;">&quot;</span><span style="color: #A6ACCD;"> \</span></div><div class='line'><span style="color: #A6ACCD;">    </span><span style="color: #FFCB6B;">--env</span><span style="color: #A6ACCD;"> </span><span style="color: #C3E88D;">LDAP_ADMIN_PASSWORD=</span><span style="color: #89DDFF;">&quot;</span><span style="color: #C3E88D;">password</span><span style="color: #89DDFF;">&quot;</span><span style="color: #A6ACCD;"> \</span></div><div class='line'><span style="color: #A6ACCD;">    </span><span style="color: #FFCB6B;">--env</span><span style="color: #A6ACCD;"> </span><span style="color: #C3E88D;">LDAP_CONFIG_PASSWORD=</span><span style="color: #89DDFF;">&quot;</span><span style="color: #C3E88D;">password</span><span style="color: #89DDFF;">&quot;</span><span style="color: #A6ACCD;"> \</span></div><div class='line'><span style="color: #A6ACCD;">    </span><span style="color: #FFCB6B;">--env</span><span style="color: #A6ACCD;"> </span><span style="color: #C3E88D;">LDAP_BASE_DN=</span><span style="color: #89DDFF;">&quot;</span><span style="color: #C3E88D;">dc=glauth,dc=com</span><span style="color: #89DDFF;">&quot;</span><span style="color: #A6ACCD;"> \</span></div><div class='line'><span style="color: #A6ACCD;">    </span><span style="color: #FFCB6B;">-v</span><span style="color: #A6ACCD;"> $PWD</span><span style="color: #FFCB6B;">/misc/openldap/config:/etc/ldap/slapd.d</span><span style="color: #A6ACCD;"> \</span></div><div class='line'><span style="color: #A6ACCD;">    </span><span style="color: #FFCB6B;">-v</span><span style="color: #A6ACCD;"> $PWD</span><span style="color: #FFCB6B;">/misc/openldap/db:/var/lib/ldap</span><span style="color: #A6ACCD;"> \</span></div><div class='line'><span style="color: #A6ACCD;">    </span><span style="color: #FFCB6B;">osixia/openldap:latest</span></div><textarea data-torchlight-original="true" style="display: none !important;">docker run \
    --rm \
    -d \
    -p 389:389 \
    --name openldap-service \
    --hostname ldap-service \
    --env LDAP_ORGANISATION="GLauth" \
    --env LDAP_DOMAIN="glauth.com" \
    --env LDAP_ADMIN_PASSWORD="password" \
    --env LDAP_CONFIG_PASSWORD="password" \
    --env LDAP_BASE_DN="dc=glauth,dc=com" \
    -v $PWD/misc/openldap/config:/etc/ldap/slapd.d \
    -v $PWD/misc/openldap/db:/var/lib/ldap \
    osixia/openldap:latest
</textarea></code></pre><p>Refer to <a href="https://github.com/glauth/glauth/wiki/Quick-openldap-setup-to-test-LDAP-backend" target="_blank" rel="noopener noreferrer">this page</a> for a somewhat more in-depth overview of testing with OpenLDAP.</p><h1 id="compatibility">Compatibility</h1><p>While our stated goal for GLAuth is to provide the simplest possible authentication server, we keep finding an increasing number of client appliances that are asking fairly “existential” questions of the server. We have been working on providing answers these clients will find satisfactory.</p><h3 id="root-dse">Root DSE</h3><p>RFC 4512: “An LDAP server SHALL provide information about itself and other information that is specific to each server. This is represented as a group of attributes located in the root DSE”</p><p>Test: <code>ldapsearch -LLL -H ldap://localhost:3893 -D cn=serviceuser,ou=svcaccts,dc=glauth,dc=com -w mysecret -x -s base &quot;(objectclass=*)&quot;</code></p><h3 id="subschema-discovery">Subschema Discovery</h3><p>RFC 4512: “To read schema attributes from the subschema (sub)entry, clients MUST issue a Search operation [RFC4511] where baseObject is the DN of the subschema (sub)entry…”</p><p>Test: <code>ldapsearch -LLL -o ldif-wrap=no -H ldap://localhost:3893 -D cn=serviceuser,ou=svcaccts,dc=glauth,dc=com -w mysecret -x -bcn=schema -s base</code></p><p>By default, this query will return a very minimal schema (~5 objects) – you can ask GLAuth to return more comprehensive schemas by unpacking, in the <code>schema/</code> directory, the OpenLDAP or FreeIPA schema archives found in the <code>assets/</code> directory.</p><h3 id="ldap-backend%3A-%E2%80%9C1.1%E2%80%9D-attribute">LDAP Backend: “1.1” attribute</h3><p>RFC 4511: “A list containing only the OID “1.1” indicates that no attributes are to be returned.”</p><h2 id="stargazers-over-time">Stargazers over time</h2><p><a href="https://starchart.cc/glauth/glauth" target="_blank" rel="noopener noreferrer"><a href="https://starchart.cc/glauth/glauth.svg" target="_self"><img src="https://starchart.cc/glauth/glauth.svg" alt="Stargazers over time" class="p-4"></a></a></p><h2 id="some-charts">Some Charts</h2><div class="echarts"></div><div class="echarts-data" style="display:none">{"option":{"xAxis":{"type":"category","data":["Mon","Tue","Wed","Thu","Fri","Sat","Sun"]},"yAxis":{"type":"value"},"series":[{"data":[820,932,901,934,1290,1330,1320],"type":"line"}]}}</div><ul class="footer-nav pt-4 mb-8 ml-0 pl-0 flex flex-wrap flex-row-reverse justify-between mt-8 list-none"><li class="ml-0 pl-0"><svg height="24" fill="none" viewBox="0 0 24 24" stroke="#6B7280" class="transform rotate-180 inline mr-1 flex-shrink-0"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg> <a class="font-semibold text-gray-500 hover:text-gray-900" href="/docs/shipping-using-podman.html">Using Podman</a></li></ul></div></article></div></div></div></div><div class="z-50 mt-12 h-12 flex dark:bg-gray-900 text-gray-500 dark:text-gray-400 justify-center p-2 border-t border-gray-100 dark:border-gray-800"><div class="flex w-full items-center"><div class="w-6 h-6 flex-none"></div><div class="text-gray-500 flex flex-grow justify-center text-align-center"><small>Copyright 2021</small></div></div></div></main></div></body></html>